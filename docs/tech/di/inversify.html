<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>åŸºäº Inversify æ‰“é€  DI ä¸šåŠ¡æ¡†æ¶ | xueruifang</title>
    <meta name="description" content="è®©å…¨æ ˆç¼–ç¨‹æ›´å®¹æ˜“~">
    <link rel="stylesheet" href="/blog/assets/style.12993c18.css">
    <link rel="modulepreload" href="/blog/assets/Home.3a5972b1.js">
    <link rel="modulepreload" href="/blog/assets/app.e1338bb9.js">
    <link rel="modulepreload" href="/blog/assets/tech_di_inversify.md.99df4753.lean.js">
    
    <link rel="icon" type="image/svg+xml" href="/logo.png">
  <meta name="twitter:title" content="åŸºäº Inversify æ‰“é€  DI ä¸šåŠ¡æ¡†æ¶ | xueruifang">
  <meta property="og:title" content="åŸºäº Inversify æ‰“é€  DI ä¸šåŠ¡æ¡†æ¶ | xueruifang">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/blog/" aria-label="xueruifang, back to home" data-v-675d8756 data-v-cc01ef16><img class="logo" src="/blog/logo.png" alt="Logo" data-v-cc01ef16> xueruifang</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/blog/tech/" data-v-b8818f8c>æŠ€æœ¯æ–‡ç«  <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/blog/about/" data-v-b8818f8c>å…³äºå°ç¼– <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>å¸¸ç”¨ç½‘å€</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://www.zhihu.com/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>çŸ¥ä¹</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://juejin.cn/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>æ˜é‡‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://vuejs.org/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>vueå®˜ç½‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://vitejs.dev/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>viteå®˜ç½‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://antdv.com/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>antdvå®˜ç½‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://reactjs.org/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>reactå®˜ç½‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://flutter.dev/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>flutterå®˜ç½‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://uniapp.dcloud.net.cn/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>uni-appå®˜ç½‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/xrf0517/blog" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/blog/tech/" data-v-b8818f8c>æŠ€æœ¯æ–‡ç«  <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/blog/about/" data-v-b8818f8c>å…³äºå°ç¼– <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>å¸¸ç”¨ç½‘å€</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://www.zhihu.com/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>çŸ¥ä¹</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://juejin.cn/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>æ˜é‡‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://vuejs.org/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>vueå®˜ç½‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://vitejs.dev/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>viteå®˜ç½‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://antdv.com/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>antdvå®˜ç½‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://reactjs.org/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>reactå®˜ç½‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://flutter.dev/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>flutterå®˜ç½‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://uniapp.dcloud.net.cn/" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>uni-appå®˜ç½‘</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/xrf0517/blog" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">æŠ€æœ¯è°ƒç ”</p><!----></li><li class="sidebar-link"><p class="sidebar-link-item">æŠ€æœ¯åŸç†</p><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="åŸºäº-inversify-æ‰“é€ -di-ä¸šåŠ¡æ¡†æ¶" tabindex="-1">åŸºäº Inversify æ‰“é€  DI ä¸šåŠ¡æ¡†æ¶ <a class="header-anchor" href="#åŸºäº-inversify-æ‰“é€ -di-ä¸šåŠ¡æ¡†æ¶" aria-hidden="true">#</a></h1><p>åœ¨å‰ç«¯çš„æ¯”è¾ƒå¤§å‹çš„æ¡†æ¶æ„å»ºä¸­ï¼Œä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬å·²ç»æ˜¯å¿…ä¸å¯å°‘çš„è®¾è®¡åŸåˆ™ã€‚InversifyJSæ˜¯å½“å‰ç›¸å¯¹æœ€æˆç†Ÿçš„ä¸€ä¸ªå‰ç«¯IoC(Inversion of Control)ç®¡ç†åº“ã€‚</p><h2 id="ä½¿ç”¨è£…é¥°å™¨å®ç°ä¾èµ–æ³¨å…¥ç³»ç»Ÿ" tabindex="-1">ä½¿ç”¨è£…é¥°å™¨å®ç°ä¾èµ–æ³¨å…¥ç³»ç»Ÿ <a class="header-anchor" href="#ä½¿ç”¨è£…é¥°å™¨å®ç°ä¾èµ–æ³¨å…¥ç³»ç»Ÿ" aria-hidden="true">#</a></h2><p>ğŸ’ Decorators to rule them all ! å¾—ç›Šäº Java çš„ æ³¨è§£ç³»ç»Ÿï¼ˆAnnotationï¼‰çš„è®¾è®¡ï¼ŒTypescript ç»™å‡ºäº†ç±»ä¼¼çš„ Decorator æ–¹æ³•ï¼Œç”¨äºå¯¹ç±»ã€ç±»çš„æ„é€ å™¨å‚æ•°ã€å±æ€§ç­‰ç­‰ï¼Œé€šè¿‡è£…é¥°å™¨çš„æ–¹å¼ï¼Œä»¥æ¸…æ™°æ˜“æ‡‚ï¼Œä¸”ä¾µå…¥ç¨‹åº¦è¾ƒä½çš„æ–¹å¼å®ç°äº† DI ç³»ç»Ÿçš„è¦æ±‚ï¼Œæˆ‘ä»¬ç»§ç»­ä½¿ç”¨é€ è½¦ä¸ºä¾‹çœ‹ä¸€ä¸‹ Inversify çš„åŸºç¡€ API ä½¿ç”¨ï¼š</p><div class="language-"><pre><code>import { Container, injectable, inject } from &quot;inversify&quot;;

// å£°æ˜ V8Engine æ˜¯å¯ä»¥è¢«ä¾èµ–æ³¨å…¥æ¡†æ¶è¯†åˆ«çš„
@injectable()
class V8Engine {
    public start() {
      	// ... ğŸ ...
        return &quot;v8&quot;;
    }
}

@injectable()
class V9Engine {
    public start() {
        // ... ğŸ ...
        return &quot;v9&quot;;
    }
}

// å£°æ˜ Car ç±»æ˜¯å¯ä»¥è¢«ä¾èµ–æ³¨å…¥æ¡†æ¶è¯†åˆ«çš„
@injectable()
class Car implements ICar {
    private engine: V8Engine;
    public constructor(engine: V8Engine) {
        this.engine = engine;
    }
    public start() { return this.engine.start(); };
    public stop() { return this.engine.stop(); };
}

// åˆ›å»ºä¸€ä¸ªä¾èµ–æ³¨å…¥å®¹å™¨
const container = new Container();
// è¿›è¡Œä¾èµ–ç»‘å®š
container.bind&lt;IEngine&gt;(V8Engine).to(V8Engine);
container.bind&lt;IEngine&gt;(V9Engine).to(V9Engine);
container.bind&lt;ICar&gt;(Car).to(Car);

// è§£æ Car å®ä¾‹ï¼Œå¹¶å°† V8Engine å®ä¾‹åŒ–åä¼ å…¥ Car çš„æ„é€ å™¨å‡½æ•°ä¸­ï¼Œä½œä¸ºå‚æ•°åˆå§‹åŒ– Car å®ä¾‹
container.get(Car);
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ•´ä¸ª DI è¿‡ç¨‹é€šè¿‡ @injectable() å®Œæˆäº† DI æ¡†æ¶çš„è½»é‡ä¾µå…¥ï¼Œä½¿å¾—ç¼–å†™åŠå…¶å°‘é‡çš„ä»£ç ï¼Œå°±èƒ½å¤Ÿå’Œæ¡†æ¶äº§ç”Ÿå…³è”ã€‚</p><h2 id="å¯¹-ioc-å®¹å™¨çš„æ›´è¿›ä¸€æ­¥å°è£…" tabindex="-1">å¯¹ IoC å®¹å™¨çš„æ›´è¿›ä¸€æ­¥å°è£… <a class="header-anchor" href="#å¯¹-ioc-å®¹å™¨çš„æ›´è¿›ä¸€æ­¥å°è£…" aria-hidden="true">#</a></h2><p>ğŸš€ Inversify æœ¬èº«æ˜¯ä¸€ä¸ªå¥½æ¡†æ¶ï¼Œä½†æ˜¯å„ç§èŠ±é‡Œèƒ¡å“¨çš„ API ä½¿ç”¨ï¼Œä¹Ÿç»™ä¸šåŠ¡å±‚å¸¦æ¥æ›´é«˜çš„è®¤çŸ¥æˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å·§å¦™åœ°å°è£…éƒ¨åˆ†æ–¹æ³•ï¼Œæä¾›ç»™ä¸Šå±‚ä½¿ç”¨ï¼Œä»¥é™ä½ã€Œè®¤çŸ¥æˆæœ¬ã€ã€‚Inversify è¿˜æ˜¯æœ‰ä¸€å®šçš„å­¦ä¹ æˆæœ¬çš„ï¼Œå…‰ API å°±è¶…è¿‡äº† 40+ï¼Œç›´æ¥ä½¿ç”¨å¯¹äºæ–°æ‰‹å’Œå°ç™½ç”¨æˆ·éå¸¸ä¸å‹å¥½ï¼Œä»¥ ğŸ‘‡ çš„æ–‡æ¡£ä¸ºä¾‹ï¼Œç†è§£ Inversify çš„ä½¿ç”¨ï¼Œè‡³å°‘è¦é€šè¯»ä¸‹é¢çš„æ–‡ç« ï¼Œå½¢æˆç†è§£ã€‚</p><p>Inversify å¯¹æä¾›äº†æ¯”è¾ƒåŸå§‹ç‰ˆæœ¬çš„ IoC å®¹å™¨ï¼Œå®ƒæä¾›äº†æœ€åŸå­åŒ–çš„åŠŸèƒ½ã€‚æˆ‘ä»¬å…¶å®å¯ä»¥å¯¹å®ƒåšè¿›ä¸€æ­¥å°è£…ï¼Œæ¥è®©ä½¿ç”¨è€…æ›´å¥½åœ°ä½¿ç”¨ï¼Œè€Œä¸ç”¨å…³å¿ƒå…¶å®ç°ç»†èŠ‚ã€‚ è¿™é‡Œä¸¾å‡ ä¸ªå¯è¡Œçš„è®¾è®¡è§„åˆ™ï¼š</p><ul><li>ä¸šåŠ¡ä¾èµ–æ³¨å…¥æ¡†æ¶ä¸­ï¼Œåªèƒ½å¤Ÿæå‡ºå¯¹è±¡ç±»å‹ï¼ˆå•ä¸€ç±»å‹æå‡ºï¼Œå¯ä»¥é™ä½å¤§é‡çš„ç†è§£æˆæœ¬ï¼Œå…¶å®å¯¹è±¡å°±å·²ç»å¯ä»¥ Cover ä½ 99% çš„è®¾è®¡äº†ï¼Œå¯ä»¥æœç»å¤æ‚çš„ API ä½¿ç”¨å¸¦æ¥çš„è®¤çŸ¥æˆæœ¬ï¼‰</li><li>å°† bind çš„è¿‡ç¨‹ï¼Œåœ¨ä¸šåŠ¡æ¡†æ¶ä¸­è‡ªåŠ¨åŒ–æ‰ï¼Œå¼€å‘è€…ä¸ç”¨å…³å¿ƒ bind è¿‡ç¨‹</li><li>åœ¨ IoC å®¹å™¨å±‚æä¾› get è¿‡ç¨‹ä¸­çš„ç¨³å®šæ€§ä¿è¯ï¼Œä»¥è‡³äºè§£æå‡ºé”™çš„æ—¶å€™æœ‰ fallback ï¼ˆé™çº§ï¼‰çš„æ–¹æ¡ˆ</li><li>åœ¨ IoC å®¹å™¨å±‚å†…ç½®ç»Ÿè®¡ IoC æå‡ºçš„æ€§èƒ½åˆ†ææ’ä»¶ï¼Œå¯ä»¥å¯¹é«˜æ€§èƒ½æ“ä½œè¿›è¡Œé«˜é™</li><li>åœ¨ IoC å®¹å™¨å±‚æé…ç½®å¼çš„æ–¹å¼ï¼Œæ¥å°è£…å¯¹ Inversify çš„ APIï¼Œè®©ä¸šåŠ¡å±‚æ¡†æ¶ä½¿ç”¨è€…æ ¹æœ¬ä¸ç”¨å…³å¿ƒ Inversify åº•å±‚å®¹å™¨çš„å®ç°</li></ul><div class="language-"><pre><code>...

IoC å®¹å™¨åœ¨ä¸šåŠ¡å±‚å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œæ¥å±è”½åº•å±‚çš„å¤æ‚åº¦ï¼Œå¯¹ä¸šåŠ¡å¼€å‘æä¾›ç®€å•çš„è§£å†³æ–¹æ¡ˆã€‚å¯¹äºä½¿ç”¨è€…è€Œè¨€ï¼Œä»–ä»¬åªéœ€è¦çŸ¥é“æœ‰ get æ–¹æ³•å³å¯ã€‚
// di-framework.ts
export class DIContainer {
  get&lt;T&gt;(serviceIdentifier: Token): T;
}
export const container = new DIContainer();
</code></pre></div><h2 id="ä¾èµ–æ³¨å…¥-token-ä¼˜åŒ–" tabindex="-1">ä¾èµ–æ³¨å…¥ Token ä¼˜åŒ– <a class="header-anchor" href="#ä¾èµ–æ³¨å…¥-token-ä¼˜åŒ–" aria-hidden="true">#</a></h2><p>é€šè¿‡ä¸šåŠ¡æ¡†æ¶æŒ‡å®š token çš„è®¾è®¡è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥ç®€åŒ–ä¾èµ–æ³¨å…¥ token å¸¦æ¥çš„è®¤çŸ¥å¤æ‚åº¦ï¼Œä¸ºæ­¤æˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹çš„è§„åˆ™é™åˆ¶ï¼š</p><ul><li>Token ä½¿ç”¨å­—ç¬¦ä¸²ä¿è¯å”¯ä¸€æ€§ï¼Œæ¯”å¦‚ï¼šninja ä¿è¯æ˜¯å¿è€…ç±»å‹çš„å…¨å±€å”¯ä¸€æ€§</li><li>Token å¯ä»¥æ˜¯å®ç°äº† toString æ–¹æ³•çš„ä»»ä½•å¯¹è±¡ï¼Œè¯¥è§„åˆ™å¯ä»¥è®©åç»­ä¾èµ–æ³¨å…¥çš„è§£æ Token å’Œåç»­é¢å‘æ¥å£çš„è®¾è®¡æ•´åˆåœ¨ä¸€èµ·</li></ul><div class="language-"><pre><code>// tokens.ts
import { createServiceIdentifier } from &#39;di-framework&#39;;
export const Engine = createServiceIdentifier(&#39;engine&#39;);
export const Tire = createServiceIdentifier(&#39;tire&#39;); // è½®èƒ
export const Car = createServiceIdentifier(&#39;car&#39;);
</code></pre></div><p>åç»­æˆ‘ä»¬å¯ä»¥è®© Engine å’Œ Car ç­‰é€šè¿‡ createServiceIdentifier è¿™ä¸ª Token çš„å·¥å‚å‡½æ•°ï¼ŒåŠ å·¥ï¼Œå®ç° toString() çš„æ–¹æ³•ï¼ŒåŒæ—¶æœ‰å¯ä»¥æ‰¿å½“å…·å¤‡ã€Œè¯­ä¹‰ã€çš„åŠŸèƒ½å‹ Decoratorï¼Œç¨ååœ¨æœ€ç»ˆæ•ˆæœä¸­ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¼˜é›…åœ°å®ç°æ–¹å¼ã€‚</p><h2 id="å°è£…-provide-è£…é¥°å™¨" tabindex="-1">å°è£… Provide è£…é¥°å™¨ <a class="header-anchor" href="#å°è£…-provide-è£…é¥°å™¨" aria-hidden="true">#</a></h2><p>ä¸ºäº†è¿›ä¸€æ­¥æ”¶æ•›è£…é¥°å™¨ï¼Œæˆ‘ä»¬å¯¹ç”¨æˆ·æä¾› @provide è£…é¥°å™¨ï¼Œç”¨äºæä¾›ç±»æˆ–è€…å¯¹è±¡ã€‚</p><div class="language-"><pre><code>// impl.ts
import { Engine, Car, Tire } from &#39;tokens&#39;;
import { IEngine } from &#39;standard-engine-interface&#39;;

// engine.v8.impl.ts
@provide(Engine)
class V8Engine implements IEngine {
  start() {
    // ... ğŸ V8 ...
  }
}

// engine.v9.impl.ts
@provide(Engine)
class V9Engine implements IEngine {
  start() {
    // ... ğŸ V9 ...
  }
}
</code></pre></div><p>åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ä½¿ç”¨ @provide è£…é¥°å™¨ï¼Œæä¾›ä¸åŒçš„ç±»æ¥ç»‘å®š Engine Tokenï¼Œå³å¯ä»¥å®ç°å¯¹æ±½è½¦å¼•æ“çš„æ— æ„ŸçŸ¥æ›¿æ¢ï¼Œåªè¦å®ç°äº† IEngine çš„å¼•æ“å‡å¯ä»¥ã€‚</p><h2 id="å®ç°æ¶ˆè´¹ä¾èµ–å…³ç³»" tabindex="-1">å®ç°æ¶ˆè´¹ä¾èµ–å…³ç³» <a class="header-anchor" href="#å®ç°æ¶ˆè´¹ä¾èµ–å…³ç³»" aria-hidden="true">#</a></h2><p>åœ¨ MyCar ç±» Constructor ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ç±»æ„é€ å‡½æ•°ä¸­æ³¨å…¥å¼•æ“å’Œè½®èƒï¼š</p><div class="language-"><pre><code>// car.impl.ts
import { container } from &#39;di-framework&#39;;
import { Engine, Tire, Car } from &#39;tokens&#39;;

// ç›´æ¥å®ç°
import &#39;engine.v9.impl&#39;;

@provide(Car)
class MyCar {
  constructor(
    @Engine private engine: IEngine,
    @Tire   private tire: ITire,
  ) {
    // init other parts ...
  }
  drive() {
    this.engine.start();
  }
}

// æœ€ç»ˆæˆ‘ä»¬åªéœ€è¦é€šè¿‡ Car Identifier æå‡º Car å®ä¾‹å³å¯
const car = container.get&lt;MyCar&gt;(Car);
</code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸Šè¿°è¿‡ç¨‹ï¼Œå°†å¤æ‚çš„ Inversify æ¡†æ¶çš„ç”¨æ³•ï¼Œå‡ç»ƒä¸ºï¼š</p><div class="language-"><pre><code>createServiceIdentifier åˆ›å»ºä¾èµ–æ³¨å…¥çš„å”¯ä¸€ Tokenï¼ŒåŒæ—¶ä¹Ÿæ˜¯æ„é€ å™¨å‚æ•°çš„è£…é¥°å™¨ï¼ˆä¸¤ç”¨å¯¹è±¡ï¼Œå…·å¤‡è¯­ä¹‰ï¼‰
@provide(ServiceIdentifier) æä¾›ä¾èµ–æ³¨å…¥çš„æœåŠ¡ï¼Œå¹¶è‡ªåŠ¨å°† Token å’Œè£…é¥°çš„ç±»åšç»‘å®š

@ServiceIdentifier å…·å¤‡è£…é¥°è¯­ä¹‰çš„æ„é€ å™¨å‚æ•°çš„è£…é¥°å™¨ï¼Œåœ¨ç±»çš„æ„é€ å‡½æ•°ä¸­è¡¨ç¤ºä¾èµ–æ³¨å…¥å…³ç³»
container.get è·å–ä¾èµ–åˆ†æï¼Œæå‡ºéœ€è¦çš„å¯¹è±¡ï¼Œå®Œæˆæ•´ä¸ª DI è¿‡ç¨‹
</code></pre></div><p>ä¿ƒä½¿ä½¿ç”¨è€…ï¼ˆä¸šåŠ¡å¼€å‘è€…ï¼‰åªéœ€è¦æŒæ¡ 4 ä¸ª API å°±å¯ä»¥å®Œæˆä¸»è¦çš„ DI ç³»ç»Ÿè®¾è®¡ï¼Œæ•´ä½“ç®€åŒ–äº†ä¾èµ–æ³¨å…¥çš„ç†è§£æˆæœ¬ï¼ŒåŒæ—¶å…¼é¡¾ DI é£æ ¼çš„ä¼˜é›…æ€§ã€‚å¯ä»¥åœ¨å®æˆ˜è¿‡ç¨‹ä¸­é€šè¿‡è¾ƒä½çš„æˆæœ¬å°è£… Inversify å®ç°ã€‚å½“ç„¶å¯¹äºæœ¬èº«éœ€æ±‚å°±æ¯”è¾ƒç®€å•çš„ï¼Œä¹Ÿå¯ä»¥æ‰‹æ’¸ä¸€ä¸ªç®€å•ç‰ˆæœ¬çš„ Inversify æˆ–è€…ä½¿ç”¨å…¶å®ƒä¸šç•Œå¼€æºçš„ DI æ¡†æ¶è¾…åŠ©å®ç°ã€‚</p><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a></h2><ul><li>â— Inversify çœŸçš„éå¸¸å¼ºå¤§ï¼Œçœ‹é¡¹ç›®èµ·æºäº 2015 å¹´ï¼Œç»è¿‡ 5 å¹´å¤šçš„è¿­ä»£ï¼Œå·²ç»å½¢æˆäº†ä¸€ä¸ªå¾ˆå¼ºå¤§çš„ä¾èµ–æ³¨å…¥åº“ï¼Œè·µè¡Œç€ IOC çš„æ€æƒ³ï¼Œä¸»æµçš„åº”ç”¨ç¨‹åºæ¶æ„åŸºæœ¬ä¸Šèƒ½å¤Ÿ cover ä½ã€‚</li><li>â— ä½¿ç”¨ OO çš„ç»„ç»‡æ–¹å¼ï¼Œæ¥å®ç°ã€Œé“¾å¼è°ƒç”¨ã€ï¼Œå»ºç«‹ xxSyntax ç±»æ¥å¤„ç†è¿˜æ˜¯é¢‡æœ‰æ„æ€çš„ã€‚</li><li>â— OO çš„ç»å…¸æ€æƒ³åœ¨å¤§å‹é¡¹ç›®é‡Œä¾æ—§ä¸è¿‡æ—¶ï¼Œè¿‘æœŸåœ¨åšæ‰©å±•ï¼ˆSPIï¼‰æœºåˆ¶çš„è®¾è®¡ï¼Œå’Œå¤–éƒ¨é›†æˆçš„æ—¶å€™ï¼Œä½¿ç”¨ Inversify ç¡®å®å¸®åŠ©è‡ªå·±ã€Œå¹³åœ°èµ·é«˜æ¥¼ã€ï¼Œä¸€å®šç¨‹åº¦ä¸Šç†Ÿæ‚‰æºä»£ç ä»£ç ä¹Ÿæ˜¯å—ç›ŠåŒªæµ…ï¼Œå¯¹ IoC çš„ TS å®ç°æœ‰äº†æ›´å…¨é¢çš„ç†è§£ã€‚</li></ul></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"about_index.md\":\"317b4bf9\",\"index.md\":\"9d413eb1\",\"manage_index.md\":\"004ac8b9\",\"manage_sum.md\":\"7b3241d6\",\"tech_di_about.md\":\"a02fc211\",\"tech_di_angular.md\":\"7b7ae587\",\"tech_di_hooks.md\":\"2f47d3fc\",\"tech_di_inversify.md\":\"99df4753\",\"tech_di_react.md\":\"9064f7e4\",\"tech_edge.md\":\"339b48d5\",\"tech_index.md\":\"d71686c9\",\"tech_iot.md\":\"be7bcaab\",\"tech_low.md\":\"ea39cdf2\"}")</script>
    <script type="module" async src="/blog/assets/app.e1338bb9.js"></script>
    
  </body>
</html>